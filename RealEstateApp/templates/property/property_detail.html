{% extends 'base.html' %}
{% block content %}

    <img class="property_img" src="{% if property.image %}{{ property.image.url }}{% endif %}">
   
  <div class="container mt-4">
  <p id="property">{{property.property_name}}</p>  
  <hr style="width: 15%;">
  <div class="row align-items-start mb-b">
    <div class="col-md-7">
    <div class="row">
    <div class="col">
      <p> Room Type : {{property.room_type}}</p>
            <p>Bedroom : {{property.bed_room}}</p>
            <p> Guest : {{property.guest}}</p>
            <p>Bed : {{property.beds}}</p>
      </div>
      <div class="col">
      {% if ranking.rank__avg %}
      Ranking : {{ranking.rank__avg}}
      {% endif %}
      </div>
    </div>
            <h5>About this Listing</h5>
            <p>{{property.Description}}</p>
    </div>
    <div class="col-5 ">
     {% if property.author == user %}
       <a class="btn btn-outline float-left" href="{% url 'realestateapp:Update_property' slug=property.slug %}"><button class="btn btn-outline-primary">Update</button></a>
       <a class="btn btn-outline float-right" href="{% url 'realestateapp:delete_property' slug=property.slug %}"><button class="btn btn-outline-danger">Delete</button></a>
       <br>
       <br>
       <hr>
       {% endif %}
        <p>  Cost : {{property.cost}} </p>
        <label>Check-In</label>
        <label class="float-right">Check-Out</label>
  <form class="mb-4">
        <div class="input-group">
        
    <input type="date" id="check_in" class="form-control" >
    <div class="input-group-prepend">
        <span class="input-group-text">-</span>
    </div>
    <input type="date" id="check_out" class="form-control">
</div>
<div class="col-auto">
    <input type="button" class="btn btn-primary mt-2 mb-4 float-right" onclick="showDiv()" value="Search">
  </div>
</form>
 <input class="d-none" type="text" value='{{property.cost}}' id="price">
 <input class="d-none" type="text" value='{{booking}}' id="booked">
    <div class="mt-8" style="display:none;" id="welcomeDiv">
    <div class="card">
    Booking Details-</br>
    <p>cost :<span id="cost"> </span></p>
    <a class="card-text float-right text-decoration-none" style="font-size: 0.9rem" href="{% url 'booking:create_booking' %}" >
        Book
        </a>
    </div>
    </div>
    </div>
    <div class="card">
    {% if feedback %}
    <h4>Feedback of {{property.property_name}} </h4>
     {% for feedback_item in feedback %}
        <div class="card-body">
             <p>{{ feedback_item.feedback }}</p>
        </div>

     {% endfor %}
     {% endif %}
    </div>
  </div>

</div>

{% include 'home/footer.html' %}
<script >
function showDiv() {
  var checkin = document.getElementById('check_in').value;
  var checkout = document.getElementById('check_out').value;
  date1 = new Date(checkin);
  date2 = new Date(checkout);
  date1time = date1.getTime();
  date2time = date2.getTime();
  day = date2time-date1time;
  day = day/(1000 * 60 * 60 * 24) + 1;
   price = document.getElementById('price').value;
   cost = day*price;
   document.getElementById('cost').innerHTML = cost;
   book = document.getElementById('booked').value;
   var booked = "{{booking}}";
  console.log(booked)
   
   console.log("99999999999")
 
   document.getElementById('welcomeDiv').style.display = "block";
}
</script>
{% endblock %}